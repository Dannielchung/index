<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title></title>
    <meta name="author" content="Admin">
    <script type="text/javascript" src="jquery-3.2.0.js"></script>
    <script type="text/javascript">
    $(function() {
        var props = initHeader();
        var users = getUsers(props);
        var str = "";
        $(users).each(function(index, el) {
            for (var i = 0; i < props.length; i++) {
                str += this[props[i]] + ",";
            }
        });

        alert(str);

        function getUsers(props) {
            var users = new Array();
            $("tbody tr").each(function(n) {
                var user = new Object();
                $(this).find("td").each(function(tn) {
                    user[props[tn]] = $(this).html();
                });
                users.push(user);
            });
            return users;
        }

        function initHeader() {
            // 可以將一些值存儲在簽標中，這個值不會通過屬性的方式顯示給用戶。
            // $('thead tr td:eq(0)').data("prop", "id");
            // $('thead tr td:eq(1)').data("prop", "username");
            // $('thead tr td:eq(2)').data("prop", "age");
            // $('thead tr td:eq(3)').data("prop", "password");
            var props = $("thead td").map(function() {
                return $(this).attr("title");
            }).get();
            return props;
        }

    });
    </script>
</head>

<body>
    <table width="700" border="1" align="center" id="tus"></table>
    <table width="700" border="1" align="center" id="users">
        <thead>
            <tr>
                <td title="id">用戶標誌</td>
                <td title="username">用戶姓名</td>
                <td title="age">用戶年齡</td>
                <td title="password">用戶密碼</td>
            </tr>
        </thead>
        <tbody>
            <tr id="abc">
                <td>1</td>
                <td>呂布</td>
                <td>23</td>
                <td>abc123</td>
            </tr>
            <tr>
                <td>2</td>
                <td>關羽</td>
                <td>23</td>
                <td>123abc</td>
            </tr>
            <tr>
                <td>3</td>
                <td>趙雲</td>
                <td>25</td>
                <td>XXX123</td>
            </tr>
            <tr>
                <td>4</td>
                <td>典偉</td>
                <td>26</td>
                <td>123XXX</td>
            </tr>
            <tr>
                <td>5</td>
                <td>孔明</td>
                <td>22</td>
                <td>597XXX</td>
            </tr>
        </tbody>
    </table>
</body>

</html>
